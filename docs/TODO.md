# 开发待办事项

## 进行中

### Phase 1: 项目基础 ✅

- [x] 项目结构搭建
- [x] 文档体系建立
- [ ] 数据库实体实现
- [ ] 基础配置完成

## 待开发

### Phase 2: 核心模块

#### 认证和用户模块
- [ ] 实现User Entity
- [ ] 实现AuthModule（注册、登录、JWT）
- [ ] 实现UserModule（CRUD）
- [ ] 实现权限守卫（JwtAuthGuard, RolesGuard）
- [ ] 前端登录注册页面
- [ ] 前端路由保护

#### 任务管理模块
- [ ] 实现Task Entity
- [ ] 实现TaskVersion Entity
- [ ] 实现TaskModule（CRUD）
- [ ] 实现版本管理功能
- [ ] 前端任务列表页
- [ ] 前端任务详情页
- [ ] 前端任务创建流程

#### 资产管理模块
- [ ] 实现Asset Entity
- [ ] 实现AssetModule（CRUD）
- [ ] 实现资产查询过滤
- [ ] 前端资产管理页
- [ ] 前端资产卡片组件
- [ ] 资产预览功能

### Phase 3: 存储和AI服务

#### 存储模块
- [ ] 实现IStorageService接口
- [ ] 实现OSSStorageService
- [ ] 实现LocalStorageService（开发用）
- [ ] 实现文件上传接口
- [ ] 实现签名URL生成
- [ ] 前端文件上传组件

#### AI服务模块
- [ ] 实现JimengService
- [ ] 实现SoraService
- [ ] 实现LLMService
- [ ] 实现重试机制
- [ ] 实现状态轮询
- [ ] Mock服务（测试用）

### Phase 4: 核心业务流程

#### 剧本处理
- [ ] 剧本上传接口
- [ ] LLM剧本解析接口
- [ ] 分镜脚本生成
- [ ] 前端剧本上传页面
- [ ] 前端分镜预览页面

#### 角色和场景生成
- [ ] 角色定妆生成接口
- [ ] 场景图生成接口
- [ ] 前端角色定妆页面
- [ ] 前端场景生成页面

#### 关键帧生成
- [ ] 批量生成关键帧接口
- [ ] 单个重试接口
- [ ] 进度查询接口
- [ ] 前端关键帧生成页面
- [ ] 前端关键帧展示（支持重试）

#### 视频生成
- [ ] 批量生成视频接口
- [ ] 单个重试接口
- [ ] 进度查询接口
- [ ] 前端视频生成页面
- [ ] 前端视频展示（支持重试）

### Phase 5: 完善和优化

#### 功能完善
- [ ] 任务版本切换和恢复
- [ ] 资产删除和管理
- [ ] 管理员后台
- [ ] 用户配额管理
- [ ] 批量操作功能

#### 用户体验
- [ ] Loading状态优化
- [ ] 错误提示优化
- [ ] 进度条和状态展示
- [ ] 响应式设计适配
- [ ] 快捷键支持

#### 性能优化
- [ ] 数据库查询优化
- [ ] 图片懒加载
- [ ] 代码分割
- [ ] CDN配置
- [ ] 缓存策略

#### 测试和文档
- [ ] 单元测试（核心Service）
- [ ] E2E测试（关键流程）
- [ ] API文档完善
- [ ] 用户手册编写

### Phase 6: 部署和运维

#### 部署配置
- [ ] PM2配置文件
- [ ] 部署脚本（Windows/Linux）
- [ ] Nginx配置示例
- [ ] 环境变量模板
- [ ] 数据库迁移脚本

#### 监控和日志
- [ ] 日志系统配置
- [ ] 错误监控
- [ ] 性能监控
- [ ] 告警配置

## 技术债务

- [ ] TypeScript严格模式检查
- [ ] ESLint警告清理
- [ ] 代码注释完善
- [ ] 重复代码重构

## 待讨论

- [ ] 是否需要任务队列（BullMQ）
- [ ] 是否需要实时通知（WebSocket）
- [ ] 是否需要数据库迁移到PostgreSQL
- [ ] 最终视频合成方案

## 已完成

- [x] 项目目录结构创建
- [x] 前后端项目初始化
- [x] 文档体系建立
- [x] 核心文档编写完成

---

## 更新说明

每次完成任务后：
1. 勾选对应的checkbox
2. 移动到"已完成"区域
3. 更新CHANGELOG.md
