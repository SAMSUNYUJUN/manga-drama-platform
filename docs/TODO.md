# 开发待办事项

## 已完成

### Phase 1: 共享类型层 ✅

- [x] 创建/shared目录结构
- [x] 定义核心类型和枚举
- [x] 配置前后端类型共享（tsconfig-paths）

### Phase 2: 后端骨架 ✅

- [x] 数据库实体（User、Task、TaskVersion、Asset）
- [x] 认证模块（注册、登录、JWT）
- [x] 用户模块（基础CRUD）
- [x] 任务模块（基础CRUD）
- [x] 资产模块（基础查询）

### Phase 3: 前端骨架 ✅

- [x] API服务层
- [x] 认证状态管理
- [x] 路由和页面骨架
- [x] 布局和通用组件

### Phase 4: 联通测试 ✅

- [x] 环境配置
- [x] 前后端集成测试

## 待开发

### Phase 5: 业务逻辑完善

#### 认证和用户模块

#### 任务管理增强
- [ ] 实现任务版本切换功能
- [ ] 实现任务状态流转验证
- [ ] 实现批量操作
- [ ] 前端创建任务表单
- [ ] 前端任务筛选和排序

#### 用户体验优化
- [ ] 完善Loading状态
- [ ] 完善错误提示
- [ ] 添加确认对话框
- [ ] 添加Toast通知组件

### Phase 6: 存储和AI服务集成

#### 存储模块
- [x] 实现IStorageService接口
- [x] 实现OSSStorageService
- [x] 实现LocalStorageService（开发用）
- [ ] 实现文件上传接口
- [ ] 实现签名URL生成
- [ ] 前端文件上传组件

#### AI服务模块
- [x] 实现JimengService
- [x] 实现SoraService
- [x] 实现LLMService
- [ ] 实现重试机制
- [ ] 实现状态轮询
- [ ] Mock服务（测试用）

### Phase 7: 核心业务流程

#### 剧本处理
- [ ] 剧本上传接口
- [ ] LLM剧本解析接口
- [ ] 分镜脚本生成
- [ ] 前端剧本上传页面
- [ ] 前端分镜预览页面

#### 角色和场景生成
- [ ] 角色定妆生成接口
- [ ] 场景图生成接口
- [ ] 前端角色定妆页面
- [ ] 前端场景生成页面

#### 关键帧生成
- [ ] 批量生成关键帧接口
- [ ] 单个重试接口
- [ ] 进度查询接口
- [ ] 前端关键帧生成页面
- [ ] 前端关键帧展示（支持重试）

#### 视频生成
- [ ] 批量生成视频接口
- [ ] 单个重试接口
- [ ] 进度查询接口
- [ ] 前端视频生成页面
- [ ] 前端视频展示（支持重试）

### Phase 8: 完善和优化

#### 功能完善
- [ ] 任务版本切换和恢复
- [ ] 资产删除和管理
- [ ] 管理员后台
- [ ] 用户配额管理
- [ ] 批量操作功能

#### 用户体验
- [ ] Loading状态优化
- [ ] 错误提示优化
- [ ] 进度条和状态展示
- [ ] 响应式设计适配
- [ ] 快捷键支持

#### 性能优化
- [ ] 数据库查询优化
- [ ] 图片懒加载
- [ ] 代码分割
- [ ] CDN配置
- [ ] 缓存策略

#### 测试和文档
- [ ] 单元测试（核心Service）
- [ ] E2E测试（关键流程）
- [ ] API文档完善
- [ ] 用户手册编写

### Phase 9: 部署和运维

#### 部署配置
- [ ] PM2配置文件
- [ ] 部署脚本（Windows/Linux）
- [ ] Nginx配置示例
- [ ] 环境变量模板
- [ ] 数据库迁移脚本

#### 监控和日志
- [ ] 日志系统配置
- [ ] 错误监控
- [ ] 性能监控
- [ ] 告警配置

## 技术债务

- [ ] TypeScript严格模式检查
- [ ] ESLint警告清理
- [ ] 代码注释完善
- [ ] 重复代码重构

## 待讨论

- [ ] 是否需要任务队列（BullMQ）
- [ ] 是否需要实时通知（WebSocket）
- [ ] 是否需要数据库迁移到PostgreSQL
- [ ] 最终视频合成方案

## 项目里程碑

### ✅ 第一阶段：骨架搭建 (2026-01-08 完成)

- [x] 项目目录结构创建
- [x] 前后端项目初始化
- [x] 文档体系建立
- [x] 共享类型层实现
- [x] 后端核心模块（认证、用户、任务、资产）
- [x] 前端核心页面和路由
- [x] 前后端联通测试

---

## 更新说明

每次完成任务后：
1. 勾选对应的checkbox
2. 移动到"已完成"区域
3. 更新CHANGELOG.md
